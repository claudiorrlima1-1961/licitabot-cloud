<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LICITABOT ‚Äî Acesso</title>
  <link rel="stylesheet" href="/static/style.css?v=3" />
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div style="font-size:40px;opacity:.95">‚öñÔ∏è</div>
      <h1>LICITABOT ‚Äî Assessoria de Licita√ß√µes e Contratos</h1>
      <p>Acesso restrito a assinantes. Digite a senha de acesso fornecida ap√≥s o pagamento.</p>

      <div class="card">
        <form id="login-form">
          <input id="pwd" class="input" type="password" placeholder="üîí  Senha de acesso" autocomplete="current-password" />
          <button id="go" class="btn" type="submit">Entrar</button>
        </form>
        <div id="msg" style="margin-top:10px;opacity:.9"></div>
      </div>
    </header>
  </div>

  <script>
  (function(){
    const form = document.getElementById('login-form');
    const pwd  = document.getElementById('pwd');
    const msg  = document.getElementById('msg');

    async function doLogin(e){
      e.preventDefault();
      msg.textContent = '';
      const password = (pwd.value || '').trim();
      if(!password){ msg.textContent='Digite a senha.'; return; }

      const r = await fetch('/login',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({password})
      });
      const d = await r.json();
      if(!r.ok){ msg.textContent = d?.error || 'Senha incorreta.'; return; }
      // sucesso ‚Üí vai para o chat
      window.location.href = '/chat';
    }

    form.addEventListener('submit', doLogin);
  })();
  </script>
</body>
</html>
